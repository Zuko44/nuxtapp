Nuxt App ‚Äî –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –†–µ–∂–∏–º –°–µ—Å—Å–∏–∏

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Å–Ω–æ–≤–Ω–æ–µ)
- `pages/` ‚Äî –º–∞—Ä—à—Ä—É—Ç—ã: `/login`, `/account`, `/products`
- `components/` ‚Äî —Ç–∞–±–ª–∏—Ü—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç–æ–≤–∞—Ä–æ–≤
- `assets/data/`, `public/data/` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–µ JSON-–¥–∞–Ω–Ω—ã–µ
- `stores/user.ts` ‚Äî Pinia store –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `server/api/*.ts` ‚Äî —ç–º—É–ª—è—Ü–∏—è API —Å JSON-—Ñ–∞–π–ª–æ–≤
- `types/*.ts` ‚Äî —Ç–∏–ø—ã `User` –∏ `Product` (TypeScript)

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–õ–æ–≥–∏–Ω –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ users.json (/data/users.json –≤ preview).

–ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ MD5 (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ crypto-js).

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞:

localStorage.setItem('userSession', JSON.stringify(user))

–î–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è –≤ store (currentUser, isLoggedIn)

–í—ã—Ö–æ–¥

–û—á–∏—â–∞–µ—Ç—Å—è localStorage

store.logout() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ /login

restoreSession()

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –≤ onMounted()

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç localStorage.getItem('userSession')

–ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –ø–∞—Ä—Å–∏—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ store

onMounted(() => {
  const userStore = useUserStore()
  userStore.restoreSession()

  if (!userStore.isLoggedIn) {
    return navigateTo('/login')
  }
})

–ü–æ—á–µ–º—É –Ω–µ middleware

Nuxt –∑–∞–ø—É—Å–∫–∞–µ—Ç middleware –¥–æ mounted() ‚Üí store –µ—â—ë –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å–µ—Å—Å–∏–∏

–î–∞–∂–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ middleware –Ω–µ –≤–∏–¥—è—Ç localStorage

–í preview SSR-–∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –¥–∞—ë—Ç –ø—Ä–æ–∫–∏–Ω—É—Ç—å cookies

–ü–æ—ç—Ç–æ–º—É –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ: –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å middleware –≤–æ–æ–±—â–µ

Preview Mode

–ö–æ–º–∞–Ω–¥–∞ npm run preview (–∏–ª–∏ nuxi preview) –∑–∞–ø—É—Å–∫–∞–µ—Ç production-like —Å–µ—Ä–≤–µ—Ä

–¢–∞–º –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç process.client –∏ useCookie() –∫–∞–∫ –Ω–∞ dev

localStorage –∏ restoreSession() ‚Äî —Å–∞–º—ã–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏:

–ù–µ—Ç definePageMeta({ middleware: '...' })

–ù–µ—Ç middleware/*.ts, –≤—ã–∑—ã–≤–∞—é—â–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç

–ï—Å—Ç—å restoreSession() –≤ onMounted() –Ω—É–∂–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

–î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ localStorage

–†–µ–∑—É–ª—å—Ç–∞—Ç

–õ–æ–≥–∏–Ω ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí —Å–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ ‚Üí –Ω–µ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç

–ù–µ—Ç middleware ‚Üí –Ω–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤

–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ